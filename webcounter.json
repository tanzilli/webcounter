[{"id":"88005173.e7bf5","type":"template","z":"81f4cb43.9f34e8","name":"Home page HTML source","field":"payload","fieldType":"msg","format":"html","syntax":"mustache","template":"\n<!DOCTYPE HTML>\n<html>\n    <head>\n        <title>NetHome Countert</title>\n        <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js\"></script>\n\n    <script type=\"text/javascript\">\n\n        var wsUriC = \"ws://raspberrypi.local:1880/websocket\";\n        var ws;\n        function wsConnectC() {\n            console.log(\"connect\",wsUriC);\n            ws = new WebSocket(wsUriC);\n            ws.onmessage = function(msg) {\n                var msg=JSON.parse(msg.data);\n                if (msg.id==1)\n                    $(\"#counter1\").text(msg.counter);\n                if (msg.id==2)\n                    $(\"#counter2\").text(msg.counter);\n                if (msg.id==3)\n                    $(\"#counter3\").text(msg.counter);\n            } \n            ws.onopen = function() {\n                console.log(\"connected\");\n            }\n            ws.onclose = function() {\n                setTimeout(wsConnectC,1000);\n                retryOpeningWebSocket();\n            }\n        }\n\n        function retryOpeningWebSocket(){\n            if (retries < 2) {            \n                setTimeout(openWebSocket, 1000);            \n                retries++;\n            }\n        }\n        \n        $(\"document\").ready()\n    </script>\n    \n    <style>\n        td {\n            text-align: center;\n        }\n        .counter {\n            font-size: 200px;\n            font-weight: bold;\n        }\n        #counter1 {\n            color: red;\n        }\n        #counter2 {\n            color: green;\n        }\n        #counter3 {\n            color: blue;\n        }\n    </style>\n</head>\n<body onload=\"wsConnectC();\" onunload=\"ws.disconnect;\">\n\n<h1>NetHome counter</h1>\n\n<table width=\"100%\">\n    <tr>\n        <td width=\"33%\">\n            <span class=\"counter\" id=\"counter1\">0</span>\n        </td>\n        <td width=\"33%\">\n            <span class=\"counter\" id=\"counter2\">0</span>\n        </td>\n        <td width=\"33%\">\n            <span class=\"counter\" id=\"counter3\">0</span>\n        </td>\n    </tr>\n</table>\n\n</body>\n</html>","x":436,"y":505,"wires":[["6f68c12b.6045e"]]}]
